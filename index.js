var D=Object.defineProperty;var X=(m,e,t)=>e in m?D(m,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[e]=t;var n=(m,e,t)=>(X(m,typeof e!="symbol"?e+"":e,t),t);import{W as P,S as Y,P as I,C as x,V as C,M as O,D as k,L as H,G as A,A as R,a as b,b as l,c as z,B as E,d as w,e as W,f as F,g as B,F as v,h as L,T as V,i as M}from"./vendor.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};G();class U{constructor(e=1.333){n(this,"aspectRatio");n(this,"fov");n(this,"znear");n(this,"zfar");n(this,"renderer");n(this,"scene");n(this,"camera");n(this,"clock");this.aspectRatio=e,this.fov=60,this.znear=1,this.zfar=1e3,this.renderer=new P,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",()=>{this.resize()},!1),window.addEventListener("mousedown",t=>{this.onMouseDown(t)}),window.addEventListener("mouseup",t=>{this.onMouseUp(t)}),window.addEventListener("mousemove",t=>{this.onMouseMove(t)}),window.addEventListener("keydown",t=>{this.onKeyDown(t)}),window.addEventListener("keyup",t=>{this.onKeyUp(t)}),this.scene=new Y,this.camera=new I(this.fov,this.aspectRatio,this.znear,this.zfar),this.clock=new x}start(){this.createScene(),this.mainLoop()}mainLoop(){this.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(()=>this.mainLoop())}resize(){this.renderer.setSize(window.innerWidth,window.innerHeight);var e=new C;this.renderer.getViewport(e);var t=window.innerWidth/window.innerHeight;this.aspectRatio>t?this.renderer.setViewport(0,(window.innerHeight-window.innerWidth/this.aspectRatio)/2,window.innerWidth,window.innerWidth/this.aspectRatio):this.renderer.setViewport((window.innerWidth-window.innerHeight*this.aspectRatio)/2,0,window.innerHeight*this.aspectRatio,window.innerHeight)}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onKeyDown(e){}onKeyUp(e){}}class K extends U{constructor(){super(1920/1080);n(this,"debugMode");n(this,"mouseDrag");n(this,"cameraOrbitX");n(this,"cameraOrbitY");n(this,"cameraDistance");n(this,"lightOrbitX");n(this,"lightOrbitY");n(this,"lightIntensity");n(this,"debugMaterial");n(this,"light");n(this,"lightHelper");n(this,"cylinder");this.debugMode=!1,this.mouseDrag=!1,this.cameraOrbitX=0,this.cameraOrbitY=0,this.cameraDistance=0,this.lightOrbitX=0,this.lightOrbitY=0,this.lightIntensity=0,this.debugMaterial=new O,this.light=new k,this.lightHelper=new H,this.cylinder=new A}createScene(){this.cameraDistance=4,this.camera.position.set(0,0,this.cameraDistance),this.camera.lookAt(0,0,0),this.camera.up.set(0,1,0);var e=new R("white",.3);this.scene.add(e),this.light.color=new b("white"),this.lightIntensity=1,this.lightOrbitX=-22.5,this.lightOrbitY=45,this.scene.add(this.light);var t=[];t.push(new l(0,0,0)),t.push(new l(0,0,10)),this.lightHelper.geometry.setFromPoints(t),this.scene.add(this.lightHelper);var o=new z;o.color=new b("gray"),this.lightHelper.material=o,this.updateLightParameters();var i=new O;i.side=E,i.color.set("black");var a=new w(new W(1e3,1e3,1e3),i);this.scene.add(a),this.debugMaterial.wireframe=!0;var h=new F(2);this.scene.add(h);const r=10;this.cylinder.add(this.createCylinderMesh(r));var c=this.createDisc(r);c.position.set(0,1,0),this.cylinder.add(c);var d=this.createDisc(r);d.position.set(0,-1,0),d.scale.set(1,-1,1),this.cylinder.add(d),this.scene.add(this.cylinder);var s=new B,p=s.addFolder("Controls");p.open();var f=p.add(this,"lightOrbitX",-180,180);f.name("Light Orbit X"),f.onChange(g=>{this.updateLightParameters()});var u=p.add(this,"lightOrbitY",-90,90);u.name("Light Orbit Y"),u.onChange(g=>{this.updateLightParameters()});var u=p.add(this,"lightIntensity",0,2);u.name("Light Intensity"),u.onChange(g=>{this.updateLightParameters()});var y=p.add(this,"debugMode");y.name("Debug Mode"),y.onChange(g=>{this.toggleDebugMode(g)})}createCylinderMesh(e){var t=[],o=[],i=[],a=[],h=360/e*Math.PI/180;for(let s=0;s<e;s++){var r=s*h;t.push(new l(Math.cos(r),1,Math.sin(r))),t.push(new l(Math.cos(r),-1,Math.sin(r))),t.push(new l(Math.cos(r+h),1,Math.sin(r+h))),t.push(new l(Math.cos(r+h),-1,Math.sin(r+h))),o.push(Math.cos(r),0,Math.sin(r)),o.push(Math.cos(r),0,Math.sin(r)),o.push(Math.cos(r+h),0,Math.sin(r+h)),o.push(Math.cos(r+h),0,Math.sin(r+h)),i.push(1-s/e,1),i.push(1-s/e,0),i.push(1-(s+1)/e,1),i.push(1-(s+1)/e,0),a.push(s*4,s*4+2,s*4+1),a.push(s*4+1,s*4+2,s*4+3)}var c=new w;c.geometry.setFromPoints(t),c.geometry.setIndex(a),c.geometry.setAttribute("normal",new v(o,3)),c.geometry.setAttribute("uv",new v(i,2));var d=new L;return d.map=new V().load("./assets/campbells.png"),c.material=d,c}createDisc(e){var c=new w,t=[],o=[],i=[];t.push(new l(0,0,0)),o.push(0,1,0);var a=360/e*Math.PI/180,h=2*Math.PI/a;for(let s=0;s<h;s++){var r=s*a;t.push(new l(Math.cos(r),0,Math.sin(r))),t.push(new l(Math.cos(r+a),0,Math.sin(r+a))),o.push(0,1,0),o.push(0,1,0),i.push(0,s*2+2,s*2+1)}var c=new w;c.geometry.setFromPoints(t),c.geometry.setIndex(i),c.geometry.setAttribute("normal",new v(o,3));var d=new L;return d.color.set(new b(.5,.5,.5)),c.material=d,c}update(e){}onMouseDown(e){e.target.localName=="canvas"&&(this.mouseDrag=!0)}onMouseUp(e){this.mouseDrag=!1}onMouseMove(e){this.mouseDrag&&(this.cameraOrbitX+=e.movementY,this.cameraOrbitX<90||this.cameraOrbitX>270?this.cameraOrbitY+=e.movementX:this.cameraOrbitY-=e.movementX,this.cameraOrbitX>=360?this.cameraOrbitX-=360:this.cameraOrbitX<0&&(this.cameraOrbitX+=360),this.cameraOrbitY>=360?this.cameraOrbitY-=360:this.cameraOrbitY<0&&(this.cameraOrbitY+=360),this.updateCameraOrbit())}updateCameraOrbit(){var e=new M().makeRotationY(-this.cameraOrbitY*Math.PI/180);e.multiply(new M().makeRotationX(-this.cameraOrbitX*Math.PI/180)),this.camera.position.set(0,0,this.cameraDistance),this.camera.applyMatrix4(e),this.cameraOrbitX<90||this.cameraOrbitX>270?this.camera.up.set(0,1,0):this.cameraOrbitX>90&&this.cameraOrbitX<270?this.camera.up.set(0,-1,0):this.cameraOrbitX==270?this.camera.up.set(Math.sin(-this.cameraOrbitY*Math.PI/180),0,Math.cos(-this.cameraOrbitY*Math.PI/180)):this.camera.up.set(-Math.sin(-this.cameraOrbitY*Math.PI/180),0,-Math.cos(-this.cameraOrbitY*Math.PI/180)),this.camera.lookAt(0,0,0)}updateLightParameters(){var e=new M().makeRotationY(this.lightOrbitX*Math.PI/180);e.multiply(new M().makeRotationX(-this.lightOrbitY*Math.PI/180)),this.light.position.set(0,0,10),this.light.applyMatrix4(e),this.lightHelper.lookAt(this.light.position),this.light.intensity=this.lightIntensity}toggleDebugMode(e){this.cylinder.children.forEach(t=>{t instanceof w&&(e?(t.userData={originalMaterial:t.material},t.material=this.debugMaterial):t.material=t.userData.originalMaterial)})}}var T=new K;T.start();
